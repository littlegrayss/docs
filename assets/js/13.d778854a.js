(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{225:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"workflow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workflow"}},[t._v("#")]),t._v(" workflow")]),t._v(" "),a("p",[t._v("scene:")]),t._v(" "),a("blockquote",[a("ol",[a("li",[t._v("一般每个人同一时间只负责一个需求，总有例外：\n突然接到bug修复，或者更紧急的需求，但是正在开发一个需求时")]),t._v(" "),a("li",[t._v("已经迭代过好几个版本了，但是前几个版本的代码有问题，一时之间找不出原因要马上回滚。修复的代码要怎么才能被包含到正在开发其他功能的开发人员代码里")]),t._v(" "),a("li",[t._v("...")])])]),t._v(" "),a("h2",{attrs:{id:"branch-management"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#branch-management"}},[t._v("#")]),t._v(" Branch Management")]),t._v(" "),a("h3",{attrs:{id:"分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分类"}},[t._v("#")]),t._v(" 分类")]),t._v(" "),a("ul",[a("li",[t._v("git flow")]),t._v(" "),a("li",[t._v("github flow")]),t._v(" "),a("li",[t._v("gitlab flow")])]),t._v(" "),a("p",[a("strong",[t._v("git-flow")])]),t._v(" "),a("blockquote",[a("p",[t._v("使用既定策略区分和管理开发、测试、生产环境的代码版本，对测试与持续集成友好，与敏捷、迭代的思路一致。")])]),t._v(" "),a("p",[t._v("有5种分支：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("master、develop分支，长期维护不会被删除")]),t._v(" "),a("p",[t._v("master分支是发布最新代码的，develop分支是存最新的开发版本")])]),t._v(" "),a("li",[a("p",[t._v("feature、release、hotfix")]),t._v(" "),a("p",[t._v("feature分支是从develop分支切出来的，所以切之前要保证develop分支是最新的\n一般我们开发一个模块或功能的时候，就切一个feature分支出来，开发完成之后再合并回develop分支。规范一点的话是在本地merge，然后提一个PR（pull request），让大家code review之后才能合并到远程分支。该分支可用于项目环境测试。")]),t._v(" "),a("p",[t._v("release分支是当develop分支上的功能开发完毕之后，准备发布时候切出来的一个分支。该分支只用于发布、bug修复等，不允许进行功能变更或需求变更。该分支可用于预发布测试。测试完毕后合并到master分支进行发布。")]),t._v(" "),a("p",[t._v("hotfix分支是修复分支，是用于修复线上bug的。hotfix跟release不同的是，hotfix是从master切出来的，修复完成后直接合并到master分支。")])])]),t._v(" "),a("h3",{attrs:{id:"初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[t._v("#")]),t._v(" 初始化")]),t._v(" "),a("p",[t._v("一般git都会内置git flow，在工程文件夹里面执行"),a("code",[t._v("git flow init")]),t._v("，就可以初始化。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("PS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("workflow-example"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow init\nNo branches exist yet. Base branches must be created now.\nBranch name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" production releases: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nBranch name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"next release"')]),t._v(" development: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("develop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nHow to name your supporting branch prefixes?\nFeature branches? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nBugfix branches? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nRelease branches? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nHotfix branches? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nSupport branches? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nVersion tag prefix? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nHooks and filters directory? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("D:/code/practice/workflow-example/.git/hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[a("img",{staticClass:"zoom-img",attrs:{src:"http://img.littlegrayss.com/mpxaur63n4",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"功能开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能开发"}},[t._v("#")]),t._v(" 功能开发")]),t._v(" "),a("p",[t._v("开发新功能的时候，需要创建一个功能分支。")]),t._v(" "),a("p",[t._v("执行"),a("code",[t._v("git flow feature start branch_name")]),t._v("会自动创建一个新的分支并切到该分支上。")]),t._v(" "),a("p",[a("strong",[t._v("执行之前必须pull一下develop分支")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("PS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("workflow-example"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow feature start feature-docs-init\nSwitched to a new branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature-docs-init'")]),t._v("\n\nSummary of actions:\n- A new branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature-docs-init'")]),t._v(" was created, based on "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n- You are now on branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature-docs-init'")]),t._v("\n\nNow, start committing on your feature. When done, use:\n\n     "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow feature finish feature-docs-init\n")])])]),a("p",[a("img",{staticClass:"zoom-img",attrs:{src:"http://img.littlegrayss.com/c0gyaosl1i",alt:""}})]),t._v(" "),a("p",[t._v("可以用"),a("code",[t._v("git branch -a")]),t._v("查看一下该工程的分支及目前所在分支。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("PS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("workflow-example"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch -a\n  develop\n* feature-docs-init\n  master\n")])])]),a("p",[t._v("功能开发完成后，可以执行"),a("code",[t._v("git flow feature finish branch_name")]),t._v("结束掉该功能开发，合并到develop分支并切回到develop分支，等待发布或者继续新功能开发。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("PS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("workflow-example"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow feature finish feature-docs-init\nSwitched to branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\nYour branch is up to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" with "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/develop'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nAlready up to date.\nDeleted branch feature-docs-init "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("was eb046e6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n\nSummary of actions:\n- The feature branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature-docs-init'")]),t._v(" was merged into "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n- Feature branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature-docs-init'")]),t._v(" has been locally deleted\n- You are now on branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n")])])]),a("h3",{attrs:{id:"版本发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本发布"}},[t._v("#")]),t._v(" 版本发布")]),t._v(" "),a("p",[t._v("等所有功能开发完成并可以上线时，执行"),a("code",[t._v("git flow release start tag")]),t._v("来创建发布分支，该分支主要是用来进行修改版本号、生成文档等操作。")]),t._v(" "),a("blockquote",[a("p",[t._v("推荐操作")]),t._v(" "),a("ul",[a("li",[t._v("修改版本号：package.json里的版本号+1")]),t._v(" "),a("li",[t._v("生成changelog："),a("code",[t._v("npm run changelog")])]),t._v(" "),a("li",[t._v("修改config.js的环境")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("PS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("workflow-example"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow release start "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(".0\nFatal: Prefix parameter missing.\nSwitched to a new branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v("\n\nSummary of actions:\n- A new branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v(" was created, based on "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n- You are now on branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v("\n\nFollow-up actions:\n- Bump the version number now"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n- Start committing last-minute fixes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" preparing your release\n- When done, run:\n\n     "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow release finish "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v("\n")])])]),a("p",[a("img",{staticClass:"zoom-img",attrs:{src:"http://img.littlegrayss.com/6fyqqqlfq2",alt:""}})]),t._v(" "),a("p",[t._v("一般到了这个阶段是可以交付给测试做上线前最后的测试，即预发布测试。")]),t._v(" "),a("p",[t._v("测试通过，把所有操作提交后就可以结束release分支。")]),t._v(" "),a("p",[t._v("结束过程中会提示要添加tag提交记录，可以把changelog中关于当前修改的内容提交，若是不提交或为空时会finish失败，需要切回该分支重新finish。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("PS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("workflow-example"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow release finish "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(".0\nBranches "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v(" and "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/develop'")]),t._v(" have diverged.\nAnd "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v(" is ahead of "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/develop'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nSwitched to branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v("\nYour branch is up to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" with "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/master'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nMerge made by the "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'recursive'")]),t._v(" strategy.\n CHANGELOG.md "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" +++++++-\n index.js     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" +++\n package.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" +-\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" files changed, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" insertions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" deletions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n create mode "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100644")]),t._v(" index.js\nAlready on "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v("\nYour branch is ahead of "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/master'")]),t._v(" by "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" commits.\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("use "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git push"')]),t._v(" to publish your "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" commits"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nhint: Waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" your editor to close the file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nSwitched to branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\nYour branch is ahead of "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/develop'")]),t._v(" by "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" commits.\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("use "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git push"')]),t._v(" to publish your "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" commits"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nwarning: refname "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v(" is ambiguous.\nwarning: refname "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v(" is ambiguous.\nMerge made by the "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'recursive'")]),t._v(" strategy.\n CHANGELOG.md "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" +++++++-\n package.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" +-\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" files changed, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" insertions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" deletions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nDeleted branch "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(".0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("was 87eae98"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n\nSummary of actions:\n- Release branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v(" has been merged into "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v("\n- The release was tagged "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v("\n- Release tag "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v(" has been back-merged into "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n- Release branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v(" has been merged into "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n- Release branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.0'")]),t._v(" has been locally deleted\n- You are now on branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n")])])]),a("p",[t._v("finish完成后会回到develop分支，需要把develop、master分支和tag标签push到远端并进行发布。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin develop\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout master\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push --tags\n")])])]),a("h3",{attrs:{id:"版本修复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本修复"}},[t._v("#")]),t._v(" 版本修复")]),t._v(" "),a("p",[t._v("修复线上bug需要从master切分支出来修复，不能直接从develop分支切，因为develop可能会有尚未上线的功能点，会把还没通过测试的内容带到线上。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("PS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("workflow-example"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow hotfix start "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(".1\nFatal: Prefix parameter missing.\nSwitched to a new branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v("\n\nSummary of actions:\n- A new branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v(" was created, based on "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v("\n- You are now on branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v("\n\nFollow-up actions:\n- Start committing your hot fixes\n- Bump the version number now"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n- When done, run:\n\n     "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow hotfix finish "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v("\n\n")])])]),a("p",[a("img",{staticClass:"zoom-img",attrs:{src:"http://img.littlegrayss.com/sc76lwx0nu",alt:""}})]),t._v(" "),a("p",[t._v("把错误修复完成后结束hotfix分支，会分别合并到master和develop分支，并回到develop分支。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("PS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("practice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("workflow-example"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow hotfix finish "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(".1\nSwitched to branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v("\nYour branch is up to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" with "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/master'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nMerge made by the "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'recursive'")]),t._v(" strategy.\n CHANGELOG.md "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" ++++++-\n index.js     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" +-\n package.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" +-\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" files changed, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" insertions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" deletions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nhint: Waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" your editor to close the file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nSwitched to branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\nYour branch is up to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" with "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/develop'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nwarning: refname "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v(" is ambiguous.\nwarning: refname "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v(" is ambiguous.\nMerge made by the "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'recursive'")]),t._v(" strategy.\n CHANGELOG.md "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" ++++++-\n index.js     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" +-\n package.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" +-\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" files changed, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" insertions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" deletions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nDeleted branch "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(".1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("was 565fd01"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n\nSummary of actions:\n- Hotfix branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v(" has been merged into "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v("\n- The hotfix was tagged "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v("\n- Hotfix tag "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v(" has been back-merged into "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n- Hotfix branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v(" has been merged into "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n- Hotfix branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),t._v(" has been locally deleted\n- You are now on branch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"分支示意图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分支示意图"}},[t._v("#")]),t._v(" 分支示意图")]),t._v(" "),a("p",[a("img",{staticClass:"zoom-img",attrs:{src:"http://img.littlegrayss.com/h4e32n2ys",alt:""}})]),t._v(" "),a("p",[a("img",{staticClass:"zoom-img",attrs:{src:"http://img.littlegrayss.com/qkcvqz4df",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"优缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优缺点"}},[t._v("#")]),t._v(" 优缺点")]),t._v(" "),a("h4",{attrs:{id:"优点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[t._v("#")]),t._v(" 优点")]),t._v(" "),a("ul",[a("li",[t._v("规范化分支管理，减少")]),t._v(" "),a("li",[t._v("单个功能独立开发，并行开发不受影响")]),t._v(" "),a("li",[t._v("修复快速，不受正在开发的功能影响")])]),t._v(" "),a("h4",{attrs:{id:"缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[t._v("#")]),t._v(" 缺点")]),t._v(" "),a("ul",[a("li",[t._v("复杂，分支繁多")]),t._v(" "),a("li",[t._v("对开发者要求高（理解工作流，熟悉Git命令）")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("支持Git Flow的图形化工具 - SourceTree")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("git flow在Windows运行特别慢，详情可以参考："),a("a",{attrs:{href:"https://github.com/nvie/gitflow/issues/6384",target:"_blank",rel:"noopener noreferrer"}},[t._v("all commands are taking lot of time"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://github.com/petervanderdoes/gitflow-avh/issues/52",target:"_blank",rel:"noopener noreferrer"}},[t._v("Speed issues on Windows"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("建议使用其他系统或者Windows subsystem for Linux")])]),t._v(" "),a("h2",{attrs:{id:"commit-messages-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit-messages-rules"}},[t._v("#")]),t._v(" Commit Messages Rules")]),t._v(" "),a("p",[t._v("查看gitlab上的commit记录很费劲，要看哪些是新功能，哪些是修复")]),t._v(" "),a("p",[t._v("建议每个功能点都commit一次，写好 log ，不仅有助于他人 review, 还可以有效的输出 CHANGELOG")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.conventionalcommits.org/zh-hans/v1.0.0-beta.4/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Conventional Commits"),a("OutboundLink")],1),t._v(" 约定式提交规范")]),t._v(" "),a("blockquote",[a("p",[t._v("它提供了一组用于创建清晰的提交历史的简单规则")])]),t._v(" "),a("h3",{attrs:{id:"messages格式："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#messages格式："}},[t._v("#")]),t._v(" messages格式：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<类型>[可选的作用域]: <描述>\n<type>[<scope>]: <subject>\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\n")])])]),a("h4",{attrs:{id:"type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[t._v("#")]),t._v(" type")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 主要type\nfeat:     增加新功能\nfix:      修复bug\n\n# 特殊type\ndocs:     只改动了文档相关的内容\nstyle:    不影响代码含义的改动，例如去掉空格、改变缩进、增删分号\nbuild:    构造工具的或者外部依赖的改动，例如webpack，npm\nrefactor: 代码重构时使用\nrevert:   执行git revert打印的message\n\n# 次要type\ntest:     添加测试或者修改现有测试\nperf:     提高性能的改动\nci:       与CI（持续集成服务）有关的改动\nchore:    不修改src或者test的其余修改，例如构建过程或辅助工具的变动\n")])])]),a("h4",{attrs:{id:"scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scope"}},[t._v("#")]),t._v(" scope")]),t._v(" "),a("p",[t._v("用于描述改动范围，一般填写项目名/模块名")]),t._v(" "),a("h4",{attrs:{id:"subject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#subject"}},[t._v("#")]),t._v(" subject")]),t._v(" "),a("p",[t._v("简单描述")]),t._v(" "),a("h4",{attrs:{id:"body"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#body"}},[t._v("#")]),t._v(" body")]),t._v(" "),a("p",[t._v("详细描述，一般项目这部分开始就不需要填写，subject里面说明就可以了，但是重要提交或者开源项目还是建议详细说明这次改动前的情况和改动动机")]),t._v(" "),a("h4",{attrs:{id:"break-changes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#break-changes"}},[t._v("#")]),t._v(" break changes")]),t._v(" "),a("p",[t._v("指出是否有破坏性修改，不兼容以前接口的改动，例如接口删除、参数减少。")]),t._v(" "),a("h4",{attrs:{id:"affect-issues"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#affect-issues"}},[t._v("#")]),t._v(" affect issues")]),t._v(" "),a("p",[t._v("指出影响到的某个问题点，比如引用需求id，issues fixed等")]),t._v(" "),a("h3",{attrs:{id:"具体使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具体使用"}},[t._v("#")]),t._v(" 具体使用")]),t._v(" "),a("p",[t._v("借助工具，既规范，又格式化，还能够支持后续分析")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i commitizen cz-conventional-changelog --save-dev\n")])])]),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// package.json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commitizen"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cz-conventional-changelog"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git-cz"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("或")]),t._v(" "),a("p",[t._v("vscode插件："),a("code",[t._v("Visual Studio Code Commitizen Support")])]),t._v(" "),a("h2",{attrs:{id:"version-number"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#version-number"}},[t._v("#")]),t._v(" Version Number")]),t._v(" "),a("h3",{attrs:{id:"版本号介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本号介绍"}},[t._v("#")]),t._v(" 版本号介绍")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("主版本号.子版本号.修订版本号\n")])])]),a("p",[t._v("主版本号：当功能模块有较大的变动，非向下兼容或者颠覆性更新，比如增加多个模块或者整体架构发生变化，主版本号+1。")]),t._v(" "),a("p",[t._v("子版本号：当功能有一定的增加或变化，向下兼容的修改或添加兼容性更新，比如增加了对权限控制、增加自定义视图等功能，子版本号+1。")]),t._v(" "),a("p",[t._v("修订版本号：一般是 Bug 修复或是一些小的变动，要经常发布修订版，时间间隔不限，修复一个严重的bug即可发布一个修订版，修订版本号+1。")]),t._v(" "),a("p",[t._v("希腊字母版本号(beta):此版本号用于标注当前版本的软件处于哪个开发阶段，当软件进入到另一个阶段时需要修改此版本号，比如alpha、beta。")]),t._v(" "),a("p",[t._v("版本号不会进位，但主版本或子版本+1之后，后面的版本号都清0，进行下一个周期的迭代。")]),t._v(" "),a("h3",{attrs:{id:"git-tag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-tag"}},[t._v("#")]),t._v(" git tag")]),t._v(" "),a("p",[t._v("用于记录发布版本的节点。")]),t._v(" "),a("p",[t._v("本身是对某次提交打上一个标签，实际上是指向特定提交对象的引用。可以帮助我们快速定位到某个版本，如果该版本出现问题可以快速修复。")]),t._v(" "),a("p",[t._v("用法：")]),t._v(" "),a("p",[a("code",[t._v("git tag v1.0.1")])]),t._v(" "),a("p",[a("code",[t._v("git tag v1.1.0 d7f80sd7")])]),t._v(" "),a("p",[a("code",[t._v("git checkout -b bugfix-1.3.4 v1.3.4")])]),t._v(" "),a("h2",{attrs:{id:"changelog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#changelog"}},[t._v("#")]),t._v(" Changelog")]),t._v(" "),a("p",[t._v("commit messages & version number")]),t._v(" "),a("p",[t._v("能够生成清晰的提交改动日志，方便查看每次版本的更新内容")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i conventional-changelog-cli --save-dev\n")])])]),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// package.json")]),t._v("\nscripts："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"changelog"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conventional-changelog -p angular -i CHANGELOG.md -s -r 0"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("npm run changelog")]),t._v(" => "),a("code",[t._v("CHANGELOG.md")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("运行该命令前需要修改package.json里的version")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://img.littlegrayss.com/ztf4lh98xg",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[t._v("#")]),t._v(" References")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.git-tower.com/learn/git/ebook/cn/command-line/advanced-topics/git-flow",target:"_blank",rel:"noopener noreferrer"}},[t._v("git-flow 的工作流程"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("git-flow 备忘清单"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);