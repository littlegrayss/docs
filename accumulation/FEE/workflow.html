<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>workflow | littlegrayss </title>
    <meta name="description" content="Just playing around">
    <link rel="icon" href="/docs/favicon.ico">
    
    <link rel="preload" href="/docs/assets/css/0.styles.2065632b.css" as="style"><link rel="preload" href="/docs/assets/js/app.845dc00f.js" as="script"><link rel="preload" href="/docs/assets/js/6.47339721.js" as="script"><link rel="preload" href="/docs/assets/js/1.af20aa1e.js" as="script"><link rel="preload" href="/docs/assets/js/13.7d3c0377.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.eeed8684.js"><link rel="prefetch" href="/docs/assets/js/11.588b569a.js"><link rel="prefetch" href="/docs/assets/js/12.9c12b2d1.js"><link rel="prefetch" href="/docs/assets/js/14.8a340479.js"><link rel="prefetch" href="/docs/assets/js/15.354c82a0.js"><link rel="prefetch" href="/docs/assets/js/16.38600e19.js"><link rel="prefetch" href="/docs/assets/js/17.e4aa58b5.js"><link rel="prefetch" href="/docs/assets/js/18.7d6069f8.js"><link rel="prefetch" href="/docs/assets/js/19.d766e65b.js"><link rel="prefetch" href="/docs/assets/js/20.4d7d4daf.js"><link rel="prefetch" href="/docs/assets/js/21.fa14aa6f.js"><link rel="prefetch" href="/docs/assets/js/22.d84d0ad1.js"><link rel="prefetch" href="/docs/assets/js/23.947a2426.js"><link rel="prefetch" href="/docs/assets/js/24.f69f6715.js"><link rel="prefetch" href="/docs/assets/js/3.28ab18a6.js"><link rel="prefetch" href="/docs/assets/js/4.6257b67f.js"><link rel="prefetch" href="/docs/assets/js/5.e0259a0d.js"><link rel="prefetch" href="/docs/assets/js/7.e990a3a4.js"><link rel="prefetch" href="/docs/assets/js/8.b872a2e0.js"><link rel="prefetch" href="/docs/assets/js/9.69253ccc.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.2065632b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">littlegrayss </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/accumulation/" class="nav-link router-link-active">技术积累</a></li><li class="dropdown-item"><!----> <a href="/docs/lifeThinking/" class="nav-link">生活感悟</a></li><li class="dropdown-item"><!----> <a href="/docs/translation/" class="nav-link">翻译</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/accumulation/" class="nav-link router-link-active">技术积累</a></li><li class="dropdown-item"><!----> <a href="/docs/lifeThinking/" class="nav-link">生活感悟</a></li><li class="dropdown-item"><!----> <a href="/docs/translation/" class="nav-link">翻译</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>workflow</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/accumulation/FEE/workflow.html#branch-management" class="sidebar-link">Branch Management</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#分类" class="sidebar-link">分类</a></li><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#功能开发" class="sidebar-link">功能开发</a></li><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#版本发布" class="sidebar-link">版本发布</a></li><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#版本修复" class="sidebar-link">版本修复</a></li><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#分支示意图" class="sidebar-link">分支示意图</a></li><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#优缺点" class="sidebar-link">优缺点</a></li></ul></li><li><a href="/docs/accumulation/FEE/workflow.html#commit-messages-rules" class="sidebar-link">Commit Messages Rules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#messages格式：" class="sidebar-link">messages格式：</a></li><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#具体使用" class="sidebar-link">具体使用</a></li></ul></li><li><a href="/docs/accumulation/FEE/workflow.html#version-number" class="sidebar-link">Version Number</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#版本号介绍" class="sidebar-link">版本号介绍</a></li><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#git-tag" class="sidebar-link">git tag</a></li></ul></li><li><a href="/docs/accumulation/FEE/workflow.html#changelog" class="sidebar-link">Changelog</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/accumulation/FEE/workflow.html#references" class="sidebar-link">References</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="workflow"><a href="#workflow" class="header-anchor">#</a> workflow</h1> <p>scene:</p> <blockquote><ol><li>一般每个人同一时间只负责一个需求，总有例外：
突然接到bug修复，或者更紧急的需求，但是正在开发一个需求时</li> <li>已经迭代过好几个版本了，但是前几个版本的代码有问题，一时之间找不出原因要马上回滚。修复的代码要怎么才能被包含到正在开发其他功能的开发人员代码里</li> <li>...</li></ol></blockquote> <h2 id="branch-management"><a href="#branch-management" class="header-anchor">#</a> Branch Management</h2> <h3 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h3> <ul><li>git flow</li> <li>github flow</li> <li>gitlab flow</li></ul> <p><strong>git-flow</strong></p> <blockquote><p>使用既定策略区分和管理开发、测试、生产环境的代码版本，对测试与持续集成友好，与敏捷、迭代的思路一致。</p></blockquote> <p>有5种分支：</p> <ul><li><p>master、develop分支，长期维护不会被删除</p> <p>master分支是发布最新代码的，develop分支是存最新的开发版本</p></li> <li><p>feature、release、hotfix</p> <p>feature分支是从develop分支切出来的，所以切之前要保证develop分支是最新的
一般我们开发一个模块或功能的时候，就切一个feature分支出来，开发完成之后再合并回develop分支。规范一点的话是在本地merge，然后提一个PR（pull request），让大家code review之后才能合并到远程分支。该分支可用于项目环境测试。</p> <p>release分支是当develop分支上的功能开发完毕之后，准备发布时候切出来的一个分支。该分支只用于发布、bug修复等，不允许进行功能变更或需求变更。该分支可用于预发布测试。测试完毕后合并到master分支进行发布。</p> <p>hotfix分支是修复分支，是用于修复线上bug的。hotfix跟release不同的是，hotfix是从master切出来的，修复完成后直接合并到master分支。</p></li></ul> <h3 id="初始化"><a href="#初始化" class="header-anchor">#</a> 初始化</h3> <p>一般git都会内置git flow，在工程文件夹里面执行<code>git flow init</code>，就可以初始化。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>practice<span class="token punctuation">\</span>workflow-example<span class="token operator">&gt;</span> <span class="token function">git</span> flow init
No branches exist yet. Base branches must be created now.
Branch name <span class="token keyword">for</span> production releases: <span class="token punctuation">[</span>master<span class="token punctuation">]</span>
Branch name <span class="token keyword">for</span> <span class="token string">&quot;next release&quot;</span> development: <span class="token punctuation">[</span>develop<span class="token punctuation">]</span>

How to name your supporting branch prefixes?
Feature branches? <span class="token punctuation">[</span><span class="token punctuation">]</span>
Bugfix branches? <span class="token punctuation">[</span><span class="token punctuation">]</span>
Release branches? <span class="token punctuation">[</span><span class="token punctuation">]</span>
Hotfix branches? <span class="token punctuation">[</span><span class="token punctuation">]</span>
Support branches? <span class="token punctuation">[</span><span class="token punctuation">]</span>
Version tag prefix? <span class="token punctuation">[</span><span class="token punctuation">]</span>
Hooks and filters directory? <span class="token punctuation">[</span>D:/code/practice/workflow-example/.git/hooks<span class="token punctuation">]</span>
</code></pre></div><p><img src="http://img.littlegrayss.com/mpxaur63n4" alt="" class="zoom-img"></p> <h3 id="功能开发"><a href="#功能开发" class="header-anchor">#</a> 功能开发</h3> <p>开发新功能的时候，需要创建一个功能分支。</p> <p>执行<code>git flow feature start branch_name</code>会自动创建一个新的分支并切到该分支上。</p> <p><strong>执行之前必须pull一下develop分支</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>practice<span class="token punctuation">\</span>workflow-example<span class="token operator">&gt;</span> <span class="token function">git</span> flow feature start feature-docs-init
Switched to a new branch <span class="token string">'feature-docs-init'</span>

Summary of actions:
- A new branch <span class="token string">'feature-docs-init'</span> was created, based on <span class="token string">'develop'</span>
- You are now on branch <span class="token string">'feature-docs-init'</span>

Now, start committing on your feature. When done, use:

     <span class="token function">git</span> flow feature finish feature-docs-init
</code></pre></div><p><img src="http://img.littlegrayss.com/c0gyaosl1i" alt="" class="zoom-img"></p> <p>可以用<code>git branch -a</code>查看一下该工程的分支及目前所在分支。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>practice<span class="token punctuation">\</span>workflow-example<span class="token operator">&gt;</span> <span class="token function">git</span> branch -a
  develop
* feature-docs-init
  master
</code></pre></div><p>功能开发完成后，可以执行<code>git flow feature finish branch_name</code>结束掉该功能开发，合并到develop分支并切回到develop分支，等待发布或者继续新功能开发。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>practice<span class="token punctuation">\</span>workflow-example<span class="token operator">&gt;</span> <span class="token function">git</span> flow feature finish feature-docs-init
Switched to branch <span class="token string">'develop'</span>
Your branch is up to <span class="token function">date</span> with <span class="token string">'origin/develop'</span><span class="token builtin class-name">.</span>
Already up to date.
Deleted branch feature-docs-init <span class="token punctuation">(</span>was eb046e6<span class="token punctuation">)</span>.

Summary of actions:
- The feature branch <span class="token string">'feature-docs-init'</span> was merged into <span class="token string">'develop'</span>
- Feature branch <span class="token string">'feature-docs-init'</span> has been locally deleted
- You are now on branch <span class="token string">'develop'</span>
</code></pre></div><h3 id="版本发布"><a href="#版本发布" class="header-anchor">#</a> 版本发布</h3> <p>等所有功能开发完成并可以上线时，执行<code>git flow release start tag</code>来创建发布分支，该分支主要是用来进行修改版本号、生成文档等操作。</p> <blockquote><p>推荐操作</p> <ul><li>修改版本号：package.json里的版本号+1</li> <li>生成changelog：<code>npm run changelog</code></li> <li>修改config.js的环境</li></ul></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>practice<span class="token punctuation">\</span>workflow-example<span class="token operator">&gt;</span> <span class="token function">git</span> flow release start <span class="token number">1.1</span>.0
Fatal: Prefix parameter missing.
Switched to a new branch <span class="token string">'1.1.0'</span>

Summary of actions:
- A new branch <span class="token string">'1.1.0'</span> was created, based on <span class="token string">'develop'</span>
- You are now on branch <span class="token string">'1.1.0'</span>

Follow-up actions:
- Bump the version number now<span class="token operator">!</span>
- Start committing last-minute fixes <span class="token keyword">in</span> preparing your release
- When done, run:

     <span class="token function">git</span> flow release finish <span class="token string">'1.1.0'</span>
</code></pre></div><p><img src="http://img.littlegrayss.com/6fyqqqlfq2" alt="" class="zoom-img"></p> <p>一般到了这个阶段是可以交付给测试做上线前最后的测试，即预发布测试。</p> <p>测试通过，把所有操作提交后就可以结束release分支。</p> <p>结束过程中会提示要添加tag提交记录，可以把changelog中关于当前修改的内容提交，若是不提交或为空时会finish失败，需要切回该分支重新finish。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>practice<span class="token punctuation">\</span>workflow-example<span class="token operator">&gt;</span> <span class="token function">git</span> flow release finish <span class="token number">1.1</span>.0
Branches <span class="token string">'develop'</span> and <span class="token string">'origin/develop'</span> have diverged.
And <span class="token builtin class-name">local</span> branch <span class="token string">'develop'</span> is ahead of <span class="token string">'origin/develop'</span><span class="token builtin class-name">.</span>
Switched to branch <span class="token string">'master'</span>
Your branch is up to <span class="token function">date</span> with <span class="token string">'origin/master'</span><span class="token builtin class-name">.</span>
Merge made by the <span class="token string">'recursive'</span> strategy.
 CHANGELOG.md <span class="token operator">|</span> <span class="token number">8</span> +++++++-
 index.js     <span class="token operator">|</span> <span class="token number">3</span> +++
 package.json <span class="token operator">|</span> <span class="token number">2</span> +-
 <span class="token number">3</span> files changed, <span class="token number">11</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span>, <span class="token number">2</span> deletions<span class="token punctuation">(</span>-<span class="token punctuation">)</span>
 create mode <span class="token number">100644</span> index.js
Already on <span class="token string">'master'</span>
Your branch is ahead of <span class="token string">'origin/master'</span> by <span class="token number">6</span> commits.
  <span class="token punctuation">(</span>use <span class="token string">&quot;git push&quot;</span> to publish your <span class="token builtin class-name">local</span> commits<span class="token punctuation">)</span>
hint: Waiting <span class="token keyword">for</span> your editor to close the file<span class="token punctuation">..</span>.
Switched to branch <span class="token string">'develop'</span>
Your branch is ahead of <span class="token string">'origin/develop'</span> by <span class="token number">3</span> commits.
  <span class="token punctuation">(</span>use <span class="token string">&quot;git push&quot;</span> to publish your <span class="token builtin class-name">local</span> commits<span class="token punctuation">)</span>
warning: refname <span class="token string">'1.1.0'</span> is ambiguous.
warning: refname <span class="token string">'1.1.0'</span> is ambiguous.
Merge made by the <span class="token string">'recursive'</span> strategy.
 CHANGELOG.md <span class="token operator">|</span> <span class="token number">8</span> +++++++-
 package.json <span class="token operator">|</span> <span class="token number">2</span> +-
 <span class="token number">2</span> files changed, <span class="token number">8</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span>, <span class="token number">2</span> deletions<span class="token punctuation">(</span>-<span class="token punctuation">)</span>
Deleted branch <span class="token number">1.1</span>.0 <span class="token punctuation">(</span>was 87eae98<span class="token punctuation">)</span>.

Summary of actions:
- Release branch <span class="token string">'1.1.0'</span> has been merged into <span class="token string">'master'</span>
- The release was tagged <span class="token string">'1.1.0'</span>
- Release tag <span class="token string">'1.1.0'</span> has been back-merged into <span class="token string">'develop'</span>
- Release branch <span class="token string">'1.1.0'</span> has been merged into <span class="token string">'develop'</span>
- Release branch <span class="token string">'1.1.0'</span> has been locally deleted
- You are now on branch <span class="token string">'develop'</span>
</code></pre></div><p>finish完成后会回到develop分支，需要把develop、master分支和tag标签push到远端并进行发布。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> push origin develop
<span class="token function">git</span> checkout master
<span class="token function">git</span> push --tags
</code></pre></div><h3 id="版本修复"><a href="#版本修复" class="header-anchor">#</a> 版本修复</h3> <p>修复线上bug需要从master切分支出来修复，不能直接从develop分支切，因为develop可能会有尚未上线的功能点，会把还没通过测试的内容带到线上。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>practice<span class="token punctuation">\</span>workflow-example<span class="token operator">&gt;</span> <span class="token function">git</span> flow hotfix start <span class="token number">1.1</span>.1
Fatal: Prefix parameter missing.
Switched to a new branch <span class="token string">'1.1.1'</span>

Summary of actions:
- A new branch <span class="token string">'1.1.1'</span> was created, based on <span class="token string">'master'</span>
- You are now on branch <span class="token string">'1.1.1'</span>

Follow-up actions:
- Start committing your hot fixes
- Bump the version number now<span class="token operator">!</span>
- When done, run:

     <span class="token function">git</span> flow hotfix finish <span class="token string">'1.1.1'</span>

</code></pre></div><p><img src="http://img.littlegrayss.com/sc76lwx0nu" alt="" class="zoom-img"></p> <p>把错误修复完成后结束hotfix分支，会分别合并到master和develop分支，并回到develop分支。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>code<span class="token punctuation">\</span>practice<span class="token punctuation">\</span>workflow-example<span class="token operator">&gt;</span> <span class="token function">git</span> flow hotfix finish <span class="token number">1.1</span>.1
Switched to branch <span class="token string">'master'</span>
Your branch is up to <span class="token function">date</span> with <span class="token string">'origin/master'</span><span class="token builtin class-name">.</span>
Merge made by the <span class="token string">'recursive'</span> strategy.
 CHANGELOG.md <span class="token operator">|</span> <span class="token number">7</span> ++++++-
 index.js     <span class="token operator">|</span> <span class="token number">2</span> +-
 package.json <span class="token operator">|</span> <span class="token number">2</span> +-
 <span class="token number">3</span> files changed, <span class="token number">8</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span>, <span class="token number">3</span> deletions<span class="token punctuation">(</span>-<span class="token punctuation">)</span>
hint: Waiting <span class="token keyword">for</span> your editor to close the file<span class="token punctuation">..</span>.
Switched to branch <span class="token string">'develop'</span>
Your branch is up to <span class="token function">date</span> with <span class="token string">'origin/develop'</span><span class="token builtin class-name">.</span>
warning: refname <span class="token string">'1.1.1'</span> is ambiguous.
warning: refname <span class="token string">'1.1.1'</span> is ambiguous.
Merge made by the <span class="token string">'recursive'</span> strategy.
 CHANGELOG.md <span class="token operator">|</span> <span class="token number">7</span> ++++++-
 index.js     <span class="token operator">|</span> <span class="token number">2</span> +-
 package.json <span class="token operator">|</span> <span class="token number">2</span> +-
 <span class="token number">3</span> files changed, <span class="token number">8</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span>, <span class="token number">3</span> deletions<span class="token punctuation">(</span>-<span class="token punctuation">)</span>
Deleted branch <span class="token number">1.1</span>.1 <span class="token punctuation">(</span>was 565fd01<span class="token punctuation">)</span>.

Summary of actions:
- Hotfix branch <span class="token string">'1.1.1'</span> has been merged into <span class="token string">'master'</span>
- The hotfix was tagged <span class="token string">'1.1.1'</span>
- Hotfix tag <span class="token string">'1.1.1'</span> has been back-merged into <span class="token string">'develop'</span>
- Hotfix branch <span class="token string">'1.1.1'</span> has been merged into <span class="token string">'develop'</span>
- Hotfix branch <span class="token string">'1.1.1'</span> has been locally deleted
- You are now on branch <span class="token string">'develop'</span>

</code></pre></div><h3 id="分支示意图"><a href="#分支示意图" class="header-anchor">#</a> 分支示意图</h3> <p><img src="http://img.littlegrayss.com/h4e32n2ys" alt="" class="zoom-img"></p> <p><img src="http://img.littlegrayss.com/qkcvqz4df" alt="" class="zoom-img"></p> <h3 id="优缺点"><a href="#优缺点" class="header-anchor">#</a> 优缺点</h3> <h4 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h4> <ul><li>规范化分支管理，减少</li> <li>单个功能独立开发，并行开发不受影响</li> <li>修复快速，不受正在开发的功能影响</li></ul> <h4 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h4> <ul><li>复杂，分支繁多</li> <li>对开发者要求高（理解工作流，熟悉Git命令）</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>支持Git Flow的图形化工具 - SourceTree</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>git flow在Windows运行特别慢，详情可以参考：<a href="https://github.com/nvie/gitflow/issues/6384" target="_blank" rel="noopener noreferrer">all commands are taking lot of time<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>、<a href="https://github.com/petervanderdoes/gitflow-avh/issues/52" target="_blank" rel="noopener noreferrer">Speed issues on Windows<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>建议使用其他系统或者Windows subsystem for Linux</p></div> <h2 id="commit-messages-rules"><a href="#commit-messages-rules" class="header-anchor">#</a> Commit Messages Rules</h2> <p>查看gitlab上的commit记录很费劲，要看哪些是新功能，哪些是修复</p> <p>建议每个功能点都commit一次，写好 log ，不仅有助于他人 review, 还可以有效的输出 CHANGELOG</p> <p><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0-beta.4/" target="_blank" rel="noopener noreferrer">Conventional Commits<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 约定式提交规范</p> <blockquote><p>它提供了一组用于创建清晰的提交历史的简单规则</p></blockquote> <h3 id="messages格式："><a href="#messages格式：" class="header-anchor">#</a> messages格式：</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;类型&gt;[可选的作用域]: &lt;描述&gt;
&lt;type&gt;[&lt;scope&gt;]: &lt;subject&gt;
&lt;BLANK LINE&gt;
&lt;body&gt;
&lt;BLANK LINE&gt;
&lt;footer&gt;
</code></pre></div><h4 id="type"><a href="#type" class="header-anchor">#</a> type</h4> <div class="language- extra-class"><pre class="language-text"><code># 主要type
feat:     增加新功能
fix:      修复bug

# 特殊type
docs:     只改动了文档相关的内容
style:    不影响代码含义的改动，例如去掉空格、改变缩进、增删分号
build:    构造工具的或者外部依赖的改动，例如webpack，npm
refactor: 代码重构时使用
revert:   执行git revert打印的message

# 次要type
test:     添加测试或者修改现有测试
perf:     提高性能的改动
ci:       与CI（持续集成服务）有关的改动
chore:    不修改src或者test的其余修改，例如构建过程或辅助工具的变动
</code></pre></div><h4 id="scope"><a href="#scope" class="header-anchor">#</a> scope</h4> <p>用于描述改动范围，一般填写项目名/模块名</p> <h4 id="subject"><a href="#subject" class="header-anchor">#</a> subject</h4> <p>简单描述</p> <h4 id="body"><a href="#body" class="header-anchor">#</a> body</h4> <p>详细描述，一般项目这部分开始就不需要填写，subject里面说明就可以了，但是重要提交或者开源项目还是建议详细说明这次改动前的情况和改动动机</p> <h4 id="break-changes"><a href="#break-changes" class="header-anchor">#</a> break changes</h4> <p>指出是否有破坏性修改，不兼容以前接口的改动，例如接口删除、参数减少。</p> <h4 id="affect-issues"><a href="#affect-issues" class="header-anchor">#</a> affect issues</h4> <p>指出影响到的某个问题点，比如引用需求id，issues fixed等</p> <h3 id="具体使用"><a href="#具体使用" class="header-anchor">#</a> 具体使用</h3> <p>借助工具，既规范，又格式化，还能够支持后续分析</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i commitizen cz-conventional-changelog --save-dev
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cz-conventional-changelog&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git-cz&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>或</p> <p>vscode插件：<code>Visual Studio Code Commitizen Support</code></p> <h2 id="version-number"><a href="#version-number" class="header-anchor">#</a> Version Number</h2> <h3 id="版本号介绍"><a href="#版本号介绍" class="header-anchor">#</a> 版本号介绍</h3> <div class="language- extra-class"><pre class="language-text"><code>主版本号.子版本号.修订版本号
</code></pre></div><p>主版本号：当功能模块有较大的变动，非向下兼容或者颠覆性更新，比如增加多个模块或者整体架构发生变化，主版本号+1。</p> <p>子版本号：当功能有一定的增加或变化，向下兼容的修改或添加兼容性更新，比如增加了对权限控制、增加自定义视图等功能，子版本号+1。</p> <p>修订版本号：一般是 Bug 修复或是一些小的变动，要经常发布修订版，时间间隔不限，修复一个严重的bug即可发布一个修订版，修订版本号+1。</p> <p>希腊字母版本号(beta):此版本号用于标注当前版本的软件处于哪个开发阶段，当软件进入到另一个阶段时需要修改此版本号，比如alpha、beta。</p> <p>版本号不会进位，但主版本或子版本+1之后，后面的版本号都清0，进行下一个周期的迭代。</p> <h3 id="git-tag"><a href="#git-tag" class="header-anchor">#</a> git tag</h3> <p>用于记录发布版本的节点。</p> <p>本身是对某次提交打上一个标签，实际上是指向特定提交对象的引用。可以帮助我们快速定位到某个版本，如果该版本出现问题可以快速修复。</p> <p>用法：</p> <p><code>git tag v1.0.1</code></p> <p><code>git tag v1.1.0 d7f80sd7</code></p> <p><code>git checkout -b bugfix-1.3.4 v1.3.4</code></p> <h2 id="changelog"><a href="#changelog" class="header-anchor">#</a> Changelog</h2> <p>commit messages &amp; version number</p> <p>能够生成清晰的提交改动日志，方便查看每次版本的更新内容</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i conventional-changelog-cli --save-dev
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
scripts：<span class="token punctuation">{</span>
    <span class="token property">&quot;changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;conventional-changelog -p angular -i CHANGELOG.md -s -r 0&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>npm run changelog</code> =&gt; <code>CHANGELOG.md</code></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>运行该命令前需要修改package.json里的version</p></div> <p><img src="http://img.littlegrayss.com/ztf4lh98xg" alt=""></p> <h3 id="references"><a href="#references" class="header-anchor">#</a> References</h3> <ul><li><a href="https://www.git-tower.com/learn/git/ebook/cn/command-line/advanced-topics/git-flow" target="_blank" rel="noopener noreferrer">git-flow 的工作流程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html" target="_blank" rel="noopener noreferrer">git-flow 备忘清单<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.845dc00f.js" defer></script><script src="/docs/assets/js/6.47339721.js" defer></script><script src="/docs/assets/js/1.af20aa1e.js" defer></script><script src="/docs/assets/js/13.7d3c0377.js" defer></script>
  </body>
</html>
